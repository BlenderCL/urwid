
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Signal Functions &#8212; Urwid 2.1.2</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Global Settings" href="global_settings.html" />
    <link rel="prev" title="List Walker Classes" href="list_walkers.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="global_settings.html" title="Global Settings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="list_walkers.html" title="List Walker Classes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Urwid 2.1.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Urwid Reference</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="signal-functions">
<h1>Signal Functions<a class="headerlink" href="#signal-functions" title="Permalink to this headline">¶</a></h1>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">urwid.*_signal()</span></code> functions use a shared Signals object instance
for tracking registered and connected signals.  There is no reason to
instantiate your own Signals object.</p>
<dl class="function">
<dt id="urwid.connect_signal">
<code class="sig-prename descclassname">urwid.</code><code class="sig-name descname">connect_signal</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">callback</em>, <em class="sig-param">user_arg=None</em>, <em class="sig-param">weak_args=None</em>, <em class="sig-param">user_args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.connect_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urwid.Signals.connect">
<code class="sig-prename descclassname">Signals.</code><code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">callback</em>, <em class="sig-param">user_arg=None</em>, <em class="sig-param">weak_args=None</em>, <em class="sig-param">user_args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.Signals.connect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object sending a signal</p></li>
<li><p><strong>name</strong> (<em>signal name</em>) – the signal to listen for, typically a string</p></li>
<li><p><strong>callback</strong> (<em>function</em>) – the function to call when that signal is sent</p></li>
<li><p><strong>user_arg</strong> – deprecated additional argument to callback (appended
after the arguments passed when the signal is
emitted). If None no arguments will be added.
Don’t use this argument, use user_args instead.</p></li>
<li><p><strong>weak_args</strong> (<em>iterable</em>) – <p>additional arguments passed to the callback
(before any arguments passed when the signal
is emitted and before any user_args).</p>
<p>These arguments are stored as weak references
(but converted back into their original value
before passing them to callback) to prevent
any objects referenced (indirectly) from
weak_args from being kept alive just because
they are referenced by this signal handler.</p>
<p>Use this argument only as a keyword argument,
since user_arg might be removed in the future.</p>
</p></li>
<li><p><strong>user_args</strong> (<em>iterable</em>) – <p>additional arguments to pass to the callback,
(before any arguments passed when the signal
is emitted but after any weak_args).</p>
<p>Use this argument only as a keyword argument,
since user_arg might be removed in the future.</p>
</p></li>
</ul>
</dd>
</dl>
<p>When a matching signal is sent, callback will be called. The
arguments it receives will be the user_args passed at connect
time (as individual arguments) followed by all the positional
parameters sent with the signal.</p>
<p>As an example of using weak_args, consider the following snippet:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urwid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">debug</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">newtext</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">debug</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s2">&quot;Edit widget changed to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">newtext</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edit</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">Edit</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">connect_signal</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
<p>If you now build some interface using “edit” and “debug”, the
“debug” widget will show whatever you type in the “edit” widget.
However, if you remove all references to the “debug” widget, it
will still be kept alive by the signal handler. This because the
signal handler is a closure that (implicitly) references the
“edit” widget. If you want to allow the “debug” widget to be
garbage collected, you can create a “fake” or “weak” closure
(it’s not really a closure, since it doesn’t reference any
outside variables, so it’s just a dynamic function):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">debug</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">weak_debug</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">newtext</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">weak_debug</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s2">&quot;Edit widget changed to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">newtext</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edit</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">Edit</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">connect_signal</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">weak_args</span><span class="o">=</span><span class="p">[</span><span class="n">debug</span><span class="p">])</span>
</pre></div>
</div>
<p>Here the weak_debug parameter in print_debug is the value passed
in the weak_args list to connect_signal. Note that the
weak_debug value passed is not a weak reference anymore, the
signals code transparently dereferences the weakref parameter
before passing it to print_debug.</p>
<p>Returns a key associated by this signal handler, which can be
used to disconnect the signal later on using
urwid.disconnect_signal_by_key. Alternatively, the signal
handler can also be disconnected by calling
urwid.disconnect_signal, which doesn’t need this key.</p>
</dd></dl>

<dl class="function">
<dt id="urwid.disconnect_by_key">
<code class="sig-prename descclassname">urwid.</code><code class="sig-name descname">disconnect_by_key</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.disconnect_by_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urwid.Signals.disconnect_by_key">
<code class="sig-prename descclassname">Signals.</code><code class="sig-name descname">disconnect_by_key</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.Signals.disconnect_by_key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to disconnect the signal from</p></li>
<li><p><strong>name</strong> (<em>signal name</em>) – the signal to disconnect, typically a string</p></li>
<li><p><strong>key</strong> (<em>Key</em>) – the key for this signal handler, as returned by
connect_signal().</p></li>
</ul>
</dd>
</dl>
<p>This function will remove a callback from the list connected
to a signal with connect_signal(). The key passed should be the
value returned by connect_signal().</p>
<p>If the callback is not connected or already disconnected, this
function will simply do nothing.</p>
</dd></dl>

<dl class="function">
<dt id="urwid.disconnect_signal">
<code class="sig-prename descclassname">urwid.</code><code class="sig-name descname">disconnect_signal</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">callback</em>, <em class="sig-param">user_arg=None</em>, <em class="sig-param">weak_args=None</em>, <em class="sig-param">user_args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.disconnect_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urwid.Signals.disconnect">
<code class="sig-prename descclassname">Signals.</code><code class="sig-name descname">disconnect</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">callback</em>, <em class="sig-param">user_arg=None</em>, <em class="sig-param">weak_args=None</em>, <em class="sig-param">user_args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.Signals.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to disconnect the signal from</p></li>
<li><p><strong>name</strong> (<em>signal name</em>) – the signal to disconnect, typically a string</p></li>
<li><p><strong>callback</strong> (<em>function</em>) – the callback function passed to connect_signal</p></li>
<li><p><strong>user_arg</strong> – the user_arg parameter passed to connect_signal</p></li>
<li><p><strong>weak_args</strong> – the weak_args parameter passed to connect_signal</p></li>
<li><p><strong>user_args</strong> – the weak_args parameter passed to connect_signal</p></li>
</ul>
</dd>
</dl>
<p>This function will remove a callback from the list connected
to a signal with connect_signal(). The arguments passed should
be exactly the same as those passed to connect_signal().</p>
<p>If the callback is not connected or already disconnected, this
function will simply do nothing.</p>
</dd></dl>

<dl class="function">
<dt id="urwid.register_signal">
<code class="sig-prename descclassname">urwid.</code><code class="sig-name descname">register_signal</code><span class="sig-paren">(</span><em class="sig-param">sig_cls</em>, <em class="sig-param">signals</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.register_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urwid.Signals.register">
<code class="sig-prename descclassname">Signals.</code><code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">sig_cls</em>, <em class="sig-param">signals</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.Signals.register" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig_class</strong> (<em>class</em>) – the class of an object that will be sending signals</p></li>
<li><p><strong>signals</strong> (<em>signal names</em>) – a list of signals that may be sent, typically each
signal is represented by a string</p></li>
</ul>
</dd>
</dl>
<p>This function must be called for a class before connecting any
signal callbacks or emitting any signals from that class’ objects</p>
</dd></dl>

<dl class="function">
<dt id="urwid.emit_signal">
<code class="sig-prename descclassname">urwid.</code><code class="sig-name descname">emit_signal</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.emit_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urwid.Signals.emit">
<code class="sig-prename descclassname">Signals.</code><code class="sig-name descname">emit</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#urwid.Signals.emit" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object sending a signal</p></li>
<li><p><strong>name</strong> (<em>signal name</em>) – the signal to send, typically a string</p></li>
<li><p><strong>*args</strong> – zero or more positional arguments to pass to the signal
callback functions</p></li>
</ul>
</dd>
</dl>
<p>This function calls each of the callbacks connected to this signal
with the args arguments as positional parameters.</p>
<p>This function returns True if any of the callbacks returned True.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/urwid-logo.png" alt="Logo"/>
            </a></p><h3>Table of contents</a></h3>
    <ul><li><a href="index.html">Reference</a></li>
    </ul>
  <h4>Previous topic</h4>
  <p class="topless"><a href="list_walkers.html"
                        title="previous chapter">List Walker Classes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="global_settings.html"
                        title="next chapter">Global Settings</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/signals.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="global_settings.html" title="Global Settings"
             >next</a> |</li>
        <li class="right" >
          <a href="list_walkers.html" title="List Walker Classes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Urwid 2.1.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Urwid Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Ian Ward et al.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>